Даже в простом коде на 4 строки и выполнением в 2 потока, количество ситуаций которое в теории может произойти около 43, в большинстве из них все пройдет гладко и идеально, а вот малая часть будет с ошибками, это там где процессорное время одного потока будет заканчиваться и начинаться другое, есть некоторые советы, которые помогут с решение самых распространенных ошибок

1. Принцип единой ответственности [[S]] - Многопоточность достаточно сложна и если отделить абстракцию идеально, то можно минимизировать риск с многопоточностью. Нужно отделять код многопоточности от остального кода
2. Ограничивать область видимости - Чем больше в коде будет мест где будут обновляться данные, тем меньше будет шансов косякнуть с кодом, нужно жестко ограничивать доступ к общим данным
3. Используйте копии данных, в идеале, лучше разбить выполнение каждого потока на отдельные подмассивы или как это сделано в потокобезопасных колекциях, как правило, копирования кода хоть и кажется нелепым, но на деле блокировки доступа к блокам кода тоже идея не из приятных, обычно это окупается
4. Потоки должны быть как можно более независимы - В идеале, чтобы каждый поток был максимально независимым, чтобы он не знал о существовании других потоков, часто это достигается с помощью семафоров, в идеале разбить данные не независимые потоки, с которыми будут работать независимыми подмножествами.